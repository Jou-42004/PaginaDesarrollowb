<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Filtros de alimentos — Fit Express</title>
<style>
  :root{ --text:#ecfdf5; --muted:#b7e4cf; --panel:#0e2a1a; --ring:rgba(34,197,94,.35);
         --accent:#22c55e; --cta:#2563eb; --cta-text:#fff; }
  *{box-sizing:border-box} html,body{margin:0;height:100%}
  body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial;background:#0b1f14;color:var(--text)}
  .container{max-width:780px;margin:0 auto;padding:0 16px}

  header{position:sticky;top:0;z-index:10;backdrop-filter:blur(8px);
    background:linear-gradient(180deg, rgba(11,42,24,.9), rgba(11,42,24,.65));
    border-bottom:1px solid rgba(183,210,192,.18);padding:8px 0}
  .topbar{display:flex;align-items:center;gap:12px;height:60px}
  .brand{display:flex;align-items:center;gap:12px;font-weight:900}
  .logo{width:32px;height:32px;border-radius:8px;background:#19c268;box-shadow:0 0 18px #19c268 inset,0 0 18px #19c268;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:bold;font-size:14px}
  .brand span{font-size:20px}
  .actions{margin-left:auto}
  .link{color:var(--muted);text-decoration:none;border:1px solid rgba(183,210,192,.25);padding:10px 14px;border-radius:12px;background:rgba(17,57,35,.6)}
  .link:hover{border-color:var(--accent);background:rgba(34,197,94,.15);box-shadow:0 4px 12px rgba(34,197,94,.2)}

  main{padding:24px 0 36px}
  .panel{background:linear-gradient(180deg, rgba(18,56,35,.55), rgba(10,38,23,.55));
    border:1px solid rgba(183,210,192,.18);border-radius:16px;padding:18px}
  h2{margin:0 0 14px}
  .group{margin-bottom:16px}
  .label{display:block;margin-bottom:8px;color:#d1fae5;font-weight:700}
  .checks{display:flex;gap:10px;flex-wrap:wrap}
  .check{display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(183,210,192,.25);border-radius:12px;padding:10px 12px;background:rgba(17,57,35,.6);cursor:pointer}
  .check input{width:16px;height:16px}

  input[type="text"]{width:100%;padding:12px;border-radius:12px;border:1px solid rgba(183,210,192,.25);background:rgba(17,57,35,.6);color:var(--text)}
  input[type="text"]:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 4px var(--ring)}

  .actions-row{display:grid;gap:12px;grid-template-columns:1fr}
  @media (min-width:560px){.actions-row{grid-template-columns:1fr 1fr}}
  .btn{display:inline-flex;justify-content:center;align-items:center;padding:12px 16px;border-radius:12px;border:1px solid rgba(0,0,0,.15);font-weight:800;cursor:pointer}
  .primary{background:var(--cta);color:var(--cta-text)}
  .primary:hover{filter:brightness(.95)}
  .ghost{background:transparent;color:var(--muted);border-color:rgba(183,210,192,.25)}
  .ghost:hover{border-color:var(--accent);background:rgba(34,197,94,.1);color:var(--text)}
</style>
</head>
<body>
<header>
  <div class="container topbar">
    <div class="brand"><div class="logo">FE</div><span>Fit Express</span></div>
    <nav class="actions"><a class="link" href="B05-CatalogoMacros.html">Volver al catálogo</a></nav>
  </div>
</header>

<main class="container">
  <section class="panel" aria-labelledby="t">
    <h2 id="t">Filtros de alimentos</h2>

    <form id="filters" novalidate>
      <div class="group">
        <span class="label">Tipo</span>
        <div class="checks">
          <label class="check"><input type="checkbox" name="type" value="vegano"> Vegano</label>
          <label class="check"><input type="checkbox" name="type" value="proteico"> Proteico</label>
          <label class="check"><input type="checkbox" name="type" value="sin-gluten"> Sin gluten</label>
        </div>
      </div>

      <div class="group">
        <label class="label" for="q">Buscar</label>
        <input id="q" name="q" type="text" placeholder="bowl, snack..." />
      </div>

      <div class="actions-row">
        <button type="submit" class="btn primary">Aplicar filtros</button>
        <button type="button" id="clear" class="btn ghost">Limpiar</button>
      </div>
    </form>
  </section>
</main>

<script>
  // Rellenar desde URL si viene de vuelta
  const params = new URLSearchParams(location.search);
  const qs = s => document.querySelector(s);
  const qa = s => Array.from(document.querySelectorAll(s));

  // Preseleccionar
  const typesParam = (params.get('types')||'').split(',').filter(Boolean);
  qa('input[name="type"]').forEach(cb=> cb.checked = typesParam.includes(cb.value));
  qs('#q').value = params.get('q') || '';

  // Aplicar filtros => volver al catálogo con querystring
  qs('#filters').addEventListener('submit', (e)=>{
    e.preventDefault();
    const types = qa('input[name="type"]:checked').map(i=>i.value).join(',');
    const q = qs('#q').value.trim();
    const url = new URL('B05-CatalogoMacros.html', location.origin);
    if(types) url.searchParams.set('types', types);
    if(q) url.searchParams.set('q', q);
    // Marca que venimos desde filtros (opcional)
    url.searchParams.set('from','filters');
    location.href = url.toString();
  });

  // Limpiar
  qs('#clear').addEventListener('click', ()=>{
    qa('input[name="type"]').forEach(i=> i.checked = false);
    qs('#q').value = '';
  });
</script>
</body>
</html>
